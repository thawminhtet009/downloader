<!doctype html>
<html lang="my">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Login (Google Sheet redirect)</title>
  <style>
    body {
      margin: 0; 
      height: 100vh;
      display: flex; 
      align-items: center; 
      justify-content: center;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg,#0f172a,#1e293b,#0f172a);
      background-size: 400% 400%;
      animation: gradientBG 12s ease infinite;
      color: #f1f5f9;
    }
    @keyframes gradientBG {
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }
    .card {
      width: 380px;
      padding: 30px 24px;
      border-radius: 20px;
      background: rgba(255,255,255,0.08);
      backdrop-filter: blur(16px) saturate(160%);
      -webkit-backdrop-filter: blur(16px) saturate(160%);
      box-shadow: 0 8px 30px rgba(0,0,0,0.5);
      animation: fadeIn 1s ease forwards;
    }
    @keyframes fadeIn {
      from {opacity:0; transform: translateY(15px);}
      to {opacity:1; transform: translateY(0);}
    }
    h1 {
      margin: 0 0 8px;
      font-size: 24px;
      text-align: center;
      background: linear-gradient(to right,#60a5fa,#c084fc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    p {
      margin: 0 0 20px;
      font-size: 14px;
      color: #cbd5e1;
      text-align: center;
    }
    input {
      width: 100%;
      padding: 14px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.1);
      background: rgba(255,255,255,0.05);
      color: #f1f5f9;
      font-size: 15px;
      outline: none;
      transition: 0.3s;
    }
    input:focus {
      border-color: #60a5fa;
      box-shadow: 0 0 10px #60a5fa55;
    }
    button {
      width: 100%;
      margin-top: 16px;
      padding: 14px;
      border-radius: 12px;
      border: none;
      background: linear-gradient(90deg,#3b82f6,#8b5cf6);
      color: #fff;
      font-weight: 600;
      font-size: 15px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(59,130,246,0.4);
    }
    .error,.ok {
      padding: 10px;
      border-radius: 10px;
      margin-top: 14px;
      font-size: 14px;
      text-align: center;
    }
    .error {
      background: rgba(239,68,68,0.15);
      color: #fca5a5;
    }
    .ok {
      background: rgba(34,197,94,0.15);
      color: #86efac;
    }
    .muted {
      margin-top: 14px;
      font-size: 12px;
      color: #94a3b8;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>VIP Login</h1>
    <p>Code ထည့်ပြီး သင့်ရဲ့ link ကို access လုပ်ပါ</p>

    <input id="codeInput" placeholder="Enter code (e.g. 75qHEC)" autocomplete="off">
    <button id="submitBtn">ဝင်မည်</button>

    <div id="feedback"></div>
    <div class="muted">Google Sheet ထဲက <b>codes</b> → <b>link</b> ကိုသုံးထားပါတယ်</div>
  </div>
<!-- https://sheets.googleapis.com/v4/spreadsheets/1yFi2LC02KhBQZ4m6kfzad_1FBsom9QDABPUHS7RKOJM/values/Sheet2!A2:D100?key=AIzaSyDZqMYFCHG17qgCbrFhyoEIdrR9ua86348 -->
<script>
const SHEET_ID = '1yFi2LC02KhBQZ4m6kfzad_1FBsom9QDABPUHS7RKOJM';
const SHEET_NAME = 'Sheet2';

let dataMap = null;
function showMsg(text, type){
  const fb = document.getElementById('feedback');
  fb.innerHTML = '';
  if(!text) return;
  const div = document.createElement('div');
  div.className = type;
  div.textContent = text;
  fb.appendChild(div);
}
async function fetchSheet(){
  if(!SHEET_ID.includes('PUT_YOUR')){
    const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(SHEET_NAME)}`;
    try{
      const res = await fetch(url);
      const txt = await res.text();
      const jsonText = txt.substring(txt.indexOf('{'), txt.lastIndexOf('}')+1);
      const obj = JSON.parse(jsonText);
      const cols = obj.table.cols.map(c => (c.label||'').toLowerCase().trim());
      const rows = obj.table.rows||[];
      dataMap = {};
      rows.forEach(r=>{
        const values = r.c.map(c=>c?c.v:'');
        const code = values[cols.indexOf('codes')];
        const link = values[cols.indexOf('link')];
        if(code) dataMap[code.trim()] = link.trim();
      });
    }catch(e){console.error(e);}
  }
}
function tryLogin(){
  const input = document.getElementById('codeInput').value.trim();
  if(!input){showMsg('ကျေးဇူးပြု၍ code ထည့်ပါ','error');return;}
  if(!dataMap){showMsg('Sheet မ load ရသေးပါ','error');return;}
  const link = dataMap[input];
  if(link){
    showMsg('Code ကိုက်ပါတယ်၊ redirect လုပ်နေပါတယ်...','ok');
    setTimeout(()=>window.location.href=link,800);
  }else{
    showMsg('Code မတွေ့ပါ','error');
  }
}
document.getElementById('submitBtn').onclick = tryLogin;
document.getElementById('codeInput').addEventListener('keydown',e=>{
  if(e.key==='Enter') tryLogin();
});
fetchSheet();
</script>
</body>
</html>
